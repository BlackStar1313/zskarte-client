<form class="login-form">
  <mat-card>
    <mat-card-header class="title">
      <mat-card-title>Login</mat-card-title>
      <img style="border-radius: 10px" mat-card-sm-image src="/assets/img/favicon/zskarte-logo.png" />
    </mat-card-header>

    <mat-card-content>
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>ZSO</mat-label>
        <input
          matInput
          [formControl]="filterControl"
          (input)="filterOrganizations()"
          [value]="selectedOrganization?.name"
          [matAutocomplete]="auto"
          placeholder="Organisation eingeben"
        />
        <mat-icon matSuffix>arrow_drop_down</mat-icon>
        <mat-autocomplete
          #auto="matAutocomplete"
          (optionSelected)="onSelectOrg($event)"
          (closed)="onCloseAutocomplete()"
          autoActiveFirstOption
          [displayWith]="nameProperty"
        >
          <mat-option *ngFor="let organization of filteredOrganizations | async" [value]="organization">
            <div class="option-wrapper">
              <img *ngIf="organization.logoSrc" [src]="organization.logoSrc" [srcset]="organization.logoSrcSet" class="login-logo" />
              {{ organization.name }}
            </div>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>Passwort</mat-label>
        <input matInput type="password" placeholder="Passwort eingeben" [(ngModel)]="password" name="password" />
      </mat-form-field>
      <mat-error *ngIf="session.getAuthError()">{{
        session.getAuthError()?.error?.error?.message || session.getAuthError()?.statusText || session.getAuthError()?.message
      }}</mat-error>

      <button class="login-button" mat-raised-button color="primary" (click)="login()">Login</button>
    </mat-card-content>
  </mat-card>

  <div class="guest-login">
    <button class="guest-login-button" mat-button (click)="guestLogin()">{{ i18n.get('guestLogin') }}</button>
  </div>
</form>
